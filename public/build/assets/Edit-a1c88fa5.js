import{a as B,z as D,r as c,b as x,l as Z,o,c as r,d as e,f as _,I as y,F as v,s as k,v as X,i as $,m as w,x as j,t as u,e as M,j as F,K as J}from"./app-dafe0949.js";import{l as q}from"./loader-50bc1437.js";import{E as H}from"./Editor-50ae5ce6.js";const Q={class:"w-full box-border p-5"},W={class:"w-full relative overflow-x-auto shadow-md sm:rounded-lg"},Y=e("div",{class:"box-border px-6 py-6 border-b bg-white flex justify-between items-center"},[e("h2",{class:"text-lg font-bold"},"Edit Materi")],-1),ee={class:"w-full p-6 box-border"},te={class:"w-full flex items-center flex-col lg:flex-row lg:space-x-3"},ae={class:"mb-6 w-1/3"},se=e("label",{for:"kelas",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Kelas",-1),ie=e("option",{value:""},"Pilih Kelas",-1),le=["value"],oe={class:"mb-6 w-1/3"},re=e("label",{for:"mapel",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Mata Pelajaran",-1),de=e("option",{value:""},"Pilih Mapel",-1),ne=["value"],ce={class:"mb-6 w-1/3"},ue=e("label",{for:"guru",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Guru Pengampu",-1),me=e("option",{value:""},"Pilih Guru",-1),pe=["value"],ge={class:"mb-6 w-full"},fe=e("label",{for:"judul",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Judul / Nama Materi",-1),be={class:"mb-6 w-full"},_e=e("label",{for:"deskripsi",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Deskripsi Materi",-1),he={class:"w-full flex flex-col lg:flex-row lg:space-x-3"},xe={class:"mb-6 w-1/3"},ye=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Media Image",-1),ve={class:"flex items-center justify-center w-full"},ke={key:0},we=["src"],je={key:1,class:"flex flex-col items-center justify-center pt-5 pb-6"},Me=F('<svg class="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path></svg><p class="mb-2 text-sm text-gray-500 dark:text-gray-400"><span class="font-semibold">Click to upload</span></p><p class="text-xs text-gray-500 dark:text-gray-400">SVG, PNG, JPG or GIF (MAX. 2 mb)</p>',3),Fe=[Me],Ve={key:0,class:"text-red-500 italic text-xs mt-1"},Ce={class:"mb-6 w-1/3"},Te=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Media File",-1),ze={class:"flex items-center justify-center w-full"},Se={key:0,class:"flex flex-col items-center justify-center pt-5 pb-6 text-red-500"},Ee=e("svg",{xmlns:"http://www.w3.org/2000/svg",id:"file","data-name":"Layer 1",viewBox:"0 0 24 24",class:"w-40 fill-current"},[e("path",{d:"M7.98,16.11c0,.47-.41,.86-.89,.86h-.83s0-1.72,0-1.72h.84c.48,0,.89,.39,.89,.86Zm7.02-8.11h6.54c-.35-.91-.88-1.75-1.59-2.46l-3.48-3.49c-.71-.71-1.55-1.24-2.46-1.59V7c0,.55,.45,1,1,1Zm-2.91,7.25h-.84v3.5s.84,0,.84,0c.48,0,.89-.39,.89-.86v-1.78c0-.47-.41-.86-.89-.86Zm9.91-4.76v8.51c0,2.76-2.24,5-5,5H7c-2.76,0-5-2.24-5-5V5C2,2.24,4.24,0,7,0h4.51c.16,0,.32,.01,.49,.02V7c0,1.65,1.35,3,3,3h6.98c.01,.16,.02,.32,.02,.49Zm-12.77,5.62c0-1.16-.96-2.11-2.14-2.11h-1.09c-.55,0-1,.45-1,1v4.44c0,.35,.28,.62,.62,.62s.62-.28,.62-.62v-1.22h.84c1.18,0,2.14-.95,2.14-2.11Zm5,0c0-1.16-.96-2.11-2.14-2.11h-1.09c-.55,0-1,.45-1,1v4.44c0,.35,.28,.56,.62,.56s1.46,0,1.46,0c1.18,0,2.14-.95,2.14-2.11v-1.78Zm4.79-1.48c0-.35-.28-.62-.62-.62h-2.31c-.35,0-.62,.28-.62,.62v4.81c0,.35,.28,.62,.62,.62s.62-.28,.62-.62v-1.8h1.24c.35,0,.62-.28,.62-.62s-.28-.62-.62-.62h-1.24v-1.14h1.69c.35,0,.62-.28,.62-.62Z"})],-1),Le={class:"mt-2 text-gray-500 font-semibold text-center"},Ae={key:1,class:"flex flex-col items-center justify-center pt-5 pb-6"},Ge=F('<svg class="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path></svg><p class="mb-2 text-sm text-gray-500 dark:text-gray-400"><span class="font-semibold">Click to upload</span></p><p class="text-xs text-gray-500 dark:text-gray-400">PDF or DOC (MAX. 5mb)</p>',3),Oe=[Ge],Pe={key:0,class:"text-red-500 italic text-xs mt-1"},Ie={class:"mb-6 w-1/3"},Ke=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Media Video",-1),Ne={class:"flex items-center justify-center w-full"},Re={key:0,class:"flex flex-col items-center justify-center pt-5 pb-6 text-red-500"},Ue=e("svg",{xmlns:"http://www.w3.org/2000/svg",id:"file","data-name":"Layer 1",viewBox:"0 0 24 24",class:"w-40 fill-current"},[e("g",{id:"XMLID_184_"},[e("path",{d:"M23.498,6.186c-0.276-1.039-1.089-1.858-2.122-2.136C19.505,3.546,12,3.546,12,3.546s-7.505,0-9.377,0.504   C1.591,4.328,0.778,5.146,0.502,6.186C0,8.07,0,12,0,12s0,3.93,0.502,5.814c0.276,1.039,1.089,1.858,2.122,2.136   C4.495,20.454,12,20.454,12,20.454s7.505,0,9.377-0.504c1.032-0.278,1.845-1.096,2.122-2.136C24,15.93,24,12,24,12   S24,8.07,23.498,6.186z M9.546,15.569V8.431L15.818,12L9.546,15.569z"})])],-1),Be={class:"mt-2 text-gray-500 font-semibold text-center"},De={key:1,class:"flex flex-col items-center justify-center pt-5 pb-6"},Ze=F('<svg class="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path></svg><p class="mb-2 text-sm text-gray-500 dark:text-gray-400"><span class="font-semibold">Click to upload</span></p><p class="text-xs text-gray-500 dark:text-gray-400">MP4, MPEG or AVI (MAX. 30 mb)</p>',3),Xe=[Ze],$e={key:0,class:"text-red-500 italic text-xs mt-1"},Je={class:"border-t px-6 py-4 box-order"},qe={key:0,class:"flex items-center justify-end"},He={class:"flex items-center"},Qe=["src"],We=e("div",{class:"text-gray-600 italic"},"Menyimpan Data",-1),Ye={key:1,class:"flex justify-end"},it={__name:"Edit",setup(et){const{notify:m}=J(),V=B(),h=D(),C=c([]),T=c([]),S=c([]),z=c([]),b=c(),g=c(),p=c(),f=c(!1),E=c("zrsng3633x1bpntx7mrn4yx8efkpcyn3qt3r5sebh01ijff5"),L=x({height:400,menubar:!0,plugins:["advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","emoticons template paste textcolor colorpicker textpattern imagetools uploadimage paste formula"],toolbar:"undo redo | bold italic fontselect fontsizeselect | alignleft aligncenter alignright bullist numlist  backcolor forecolor | formula code | imagetools link image paste ",fontsize_formats:"8pt 9pt 10pt 11pt 12pt 14pt 18pt 24pt 36pt",paste_data_images:!0,images_upload_handler:function(t,s,n){s("data:"+t.blob().type+";base64,"+t.base64())},image_class_list:[{title:"Responsive",value:"img-responsive"}]}),a=x({id:null,id_kelas:"",id_rombel:"",id_guru:"",judul:"",slug:"",deskripsi:"",media_image:"",media_file:"",media_video:""}),l=x({id_kelas:null,id_rombel:null,id_guru:null,judul:null,slug:null,deskripsi:null,media_image:null,media_file:null,media_video:null}),A=async()=>{try{const{data:t}=await instanceAdmin({url:"/opt/kelas",method:"GET"});C.value=t.data}catch(t){t.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):m({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}},G=async()=>{try{const{data:t}=await instanceAdmin({url:"/opt/mapel",method:"GET"});T.value=t.data}catch(t){t.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):m({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}},O=async()=>{try{const{data:t}=await instanceAdmin({url:"/opt/rombel",method:"GET"});S.value=t.data}catch(t){t.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):m({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}},P=async()=>{try{const{data:t}=await instanceAdmin({url:"/opt/guru",method:"GET"});z.value=t.data}catch(t){t.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):m({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}},I=async()=>{f.value=!0;try{const{data:t}=await instanceAdmin({url:`/admin/materi/${h.params.id}/detail`,method:"GET"}),s=t.data;a.id=s.id,a.id_kelas=s.id_kelas,a.id_mapel=s.id_mapel,a.id_rombel=s.id_rombel,a.id_guru=s.id_guru,a.judul=s.judul,a.kelas=s.kelas,a.mapel=s.mapel,a.guru=s.guru,a.deskripsi=s.deskripsi,a.rombel=s.rombel,a.media_file=s.media_file,a.media_image=s.media_image,a.media_video=s.media_video,a.slug=s.slug}catch(t){console.log(t)}finally{f.value=!1}},K=()=>{l.media_image=null;const t=b.value.files[0],s=t.size,n=t.type,i=["image/jpg","image/jpeg","image/svg+xml","image/gif","image/png"],d=2*1048576;if(!i.includes(n)){l.media_image="Type File must be jpg, jpeg, png, svg or gif";return}if(s>d){l.media_image="file size cannot be larger than 2 mb";return}a.media_image=URL.createObjectURL(t)},N=()=>{l.media_file=null;const t=g.value.files[0],s=t.size,n=t.type,i=["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],d=5*1048576;if(!i.includes(n)){l.media_file="Type File must be pdf or docx";return}if(s>d){l.media_file="file size cannot be larger than 5 mb";return}a.media_file=URL.createObjectURL(t)},R=()=>{l.media_video=null;const t=p.value.files[0],s=t.size,n=t.type,i=["video/mp4","video/mpeg","video/x-msvideo"],d=30*1048576;if(!i.includes(n)){l.media_video="Type Video must be mp4, mpeg or avi";return}if(s>d){l.media_video="file size cannot be larger than 30 mb";return}a.media_video=URL.createObjectURL(p.value.files[0])},U=async()=>{if(l.media_file||l.media_image||l.media_video){m({text:"Anda memiliki input yang tidak sesuai, silahkan cek kembali input anda",type:"error",duration:2e3});return}f.value=!0;try{let t=new FormData;t.append("id_kelas",a.id_kelas??""),t.append("id_mapel",a.id_mapel??""),t.append("id_rombel",a.id_rombel??""),t.append("id_guru",a.id_guru??""),t.append("judul",a.judul??""),t.append("slug",a.slug??""),t.append("deskripsi",a.deskripsi??""),b.value.files[0]!==void 0&&t.append("media_image",b.value.files[0]),g.value.files[0]!==void 0&&t.append("media_file",g.value.files[0]),p.value.files[0]!==void 0&&t.append("media_video",p.value.files[0]);const{data:s}=await instanceAdmin({url:`/admin/materi/${h.params.id}/update`,method:"POST",headers:{"Content-Type":"multipart/form-data"},data:t});m({text:"Berhasil ubah materi",type:"success",duration:2e3}),V.push({name:"showMateri",params:{id:h.params.id}})}catch(t){console.log(t),t.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):t.response.status==422?t.response.data.errors:m({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}finally{f.value=!1}};return Z(()=>{I(),A(),P(),G(),O()}),(t,s)=>{var n;return o(),r("div",Q,[e("div",W,[Y,e("div",ee,[e("div",te,[e("div",ae,[se,_(e("select",{id:"kelas","onUpdate:modelValue":s[0]||(s[0]=i=>a.id_kelas=i),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[ie,(o(!0),r(v,null,k(C.value,(i,d)=>(o(),r("option",{key:d,value:i.id},u(i.text),9,le))),128))],512),[[y,a.id_kelas]])]),e("div",oe,[re,_(e("select",{id:"mapel","onUpdate:modelValue":s[1]||(s[1]=i=>a.id_mapel=i),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[de,(o(!0),r(v,null,k(T.value,(i,d)=>(o(),r("option",{key:d,value:i.id},u(i.text),9,ne))),128))],512),[[y,a.id_mapel]])]),e("div",ce,[ue,_(e("select",{id:"guru","onUpdate:modelValue":s[2]||(s[2]=i=>a.id_guru=i),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[me,(o(!0),r(v,null,k(z.value,(i,d)=>(o(),r("option",{key:d,value:i.id},u(i.text),9,pe))),128))],512),[[y,a.id_guru]])])]),e("div",ge,[fe,_(e("textarea",{id:"judul","onUpdate:modelValue":s[3]||(s[3]=i=>a.judul=i),rows:"2",class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Theorema Phytagoras ..."},null,512),[[X,a.judul]])]),e("div",be,[_e,$(w(H),{modelValue:a.deskripsi,"onUpdate:modelValue":s[4]||(s[4]=i=>a.deskripsi=i),"api-key":E.value,init:L},null,8,["modelValue","api-key","init"])]),e("div",he,[e("div",xe,[ye,e("div",ve,[e("label",{for:"media-image",class:j(["flex flex-col items-center justify-center w-full h-64 border-2 border-dashed rounded-lg cursor-pointer bg-gray-50 box-border overflow-hidden",l.media_image?"border-red-300":"border-gray-300"])},[a.media_image?(o(),r("div",ke,[e("img",{src:a.media_image,alt:"",loading:"lazy",class:"w-full object-cover object-center"},null,8,we)])):(o(),r("div",je,Fe)),e("input",{id:"media-image",ref_key:"mediaImage",ref:b,type:"file",class:"sr-only",onChange:K},null,544)],2)]),l.media_image?(o(),r("div",Ve,u(l.media_image),1)):M("",!0)]),e("div",Ce,[Te,e("div",ze,[e("label",{for:"media-file",class:j(["flex flex-col items-center justify-center w-full h-64 border-2 border-dashed rounded-lg cursor-pointer bg-gray-50",l.media_file?"border-red-300":"border-gray-300"])},[a.media_file?(o(),r("div",Se,[Ee,e("div",Le,u(((n=g.value.files[0])==null?void 0:n.name)??"Materi"),1)])):(o(),r("div",Ae,Oe)),e("input",{id:"media-file",ref_key:"mediaFile",ref:g,type:"file",class:"sr-only",onChange:N},null,544)],2)]),l.media_file?(o(),r("div",Pe,u(l.media_file),1)):M("",!0)]),e("div",Ie,[Ke,e("div",Ne,[e("label",{for:"media-video",class:j(["flex flex-col items-center justify-center w-full h-64 border-2 border-dashed rounded-lg cursor-pointer bg-gray-50",l.media_video?"border-red-300":"border-gray-300"])},[a.media_video?(o(),r("div",Re,[Ue,e("div",Be,u(p.value.files[0]?p.value.files[0].name:a.media_video),1)])):(o(),r("div",De,Xe)),e("input",{id:"media-video",ref_key:"mediaVideo",ref:p,type:"file",class:"sr-only",onChange:R},null,544)],2)]),l.media_video?(o(),r("div",$e,u(l.media_video),1)):M("",!0)])])]),e("div",Je,[f.value?(o(),r("div",qe,[e("div",He,[e("img",{src:w(q),alt:"",class:"w-8"},null,8,Qe),We])])):(o(),r("div",Ye,[e("button",{onClick:s[5]||(s[5]=i=>w(V).push({name:"showMateri",params:{id:1}})),type:"button",class:"mr-5 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"}," Batal "),e("button",{onClick:U,type:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"}," Simpan ")]))])])])}}};export{it as default};
