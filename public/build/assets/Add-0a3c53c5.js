import{a as G,r as b,b as S,l as N,o as i,c as r,d as t,f as n,v as x,x as u,t as d,e as _,I as g,w as A,F as k,s as f,m as M,J as I}from"./app-87241906.js";import{l as P}from"./loader-50bc1437.js";const B={class:"w-full box-border p-5"},C={class:"w-full relative overflow-x-auto shadow-md sm:rounded-lg"},D=t("div",{class:"box-border px-6 py-6 border-b bg-white flex justify-between items-center"},[t("h2",{class:"text-lg font-bold"},"Buat Ujian")],-1),L={class:"w-full p-6 box-border bg-white"},R={class:"w-full flex flex-col lg:flex-row lg:space-x-3"},z={class:"mb-6 w-2/3"},H=t("label",{for:"nama",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Judul / Nama Ujian",-1),J={key:0,class:"text-red-500 italic text-xs mt-1"},W={class:"mb-6 w-1/3"},Y=t("label",{for:"soal",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Soal",-1),q=t("option",{value:""},"Pilih Soal",-1),Q=["value"],X={key:0,class:"text-red-500 italic text-xs mt-1"},Z={class:"w-full flex flex-col lg:flex-row lg:space-x-3"},ee={class:"mb-6 w-1/3"},te=t("label",{for:"kelas",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Kelas",-1),ae=t("option",{value:""},"Pilih Kelas",-1),le=["value"],se={key:0,class:"text-red-500 italic text-xs mt-1"},oe={class:"mb-6 w-1/3"},ie=t("label",{for:"mapel",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Mata Pelajaran",-1),re=t("option",{value:""},"Pilih Mapel",-1),de=["value"],ne={key:0,class:"text-red-500 italic text-xs mt-1"},ue={class:"mb-6 w-1/3"},_e=t("label",{for:"guru",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Guru Pengampu",-1),ce=t("option",{value:""},"Pilih Guru",-1),me=["value"],be={key:0,class:"text-red-500 italic text-xs mt-1"},ge={class:"w-full flex flex-col lg:flex-row lg:space-x-3"},xe={class:"mb-6 w-1/3"},ke=t("label",{for:"lama_ujian",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Lama Ujian",-1),fe={class:"w-full flex items-center"},pe=t("div",null,"Menit",-1),ve={key:0,class:"text-red-500 italic text-xs mt-1"},ye={class:"mb-6 w-1/3"},he=t("label",{for:"waktu_mulai",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Waktu Mulai",-1),we={class:"w-full flex items-center"},je={key:0,class:"text-red-500 italic text-xs mt-1"},Se={class:"mb-6 w-1/3"},Me=t("label",{for:"w_akhir",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Waktu Terlambat",-1),Fe={class:"w-full flex items-center"},Te={key:0,class:"text-red-500 italic text-xs mt-1"},Ue={class:"w-full flex flex-col lg:flex-row lg:space-x-3"},Ee={class:"mb-6 w-1/3"},Oe=t("label",{for:"is_hasil",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Tampil Hasil",-1),Ve=t("option",{value:1},"Ya",-1),$e=t("option",{value:0},"Tidak",-1),Ke=[Ve,$e],Ge={key:0,class:"text-red-500 italic text-xs mt-1"},Ne={class:"mb-6 w-1/3"},Ae=t("label",{for:"is_acak",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Acak Soal",-1),Ie=t("option",{value:1},"Ya",-1),Pe=t("option",{value:0},"Tidak",-1),Be=[Ie,Pe],Ce={key:0,class:"text-red-500 italic text-xs mt-1"},De={class:"border-t px-6 py-4 box-order"},Le={key:0,class:"flex items-center justify-end"},Re={class:"flex items-center"},ze=["src"],He=t("div",{class:"text-gray-600 italic"},"Menyimpan Data",-1),Je={key:1,class:"flex justify-end"},Qe={__name:"Add",setup(We){const y=G(),{notify:c}=I(),p=b([]),h=b([]),w=b([]),F=b([]),j=b([]),v=b(!1),s=S({id_soal:"",id_kelas:"",id_jenis_ujian:1,id_materi:"",id_guru:"",id_rombel:"",nama:"",lama_ujian:"",waktu_mulai:"",w_akhir:"",is_hasil:0,is_acak:0}),a=S({id_soal:null,id_kelas:null,id_jenis_ujian:null,id_materi:null,id_guru:null,id_rombel:null,nama:null,lama_ujian:null,waktu_mulai:null,w_akhir:null,is_hasil:null,is_acak:null}),T=async()=>{try{const{data:o}=await instanceAdmin({url:"/opt/soal",method:"GET"});p.value=o.data}catch(o){o.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):c({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}},U=async()=>{try{const{data:o}=await instanceAdmin({url:"/opt/kelas",method:"GET"});h.value=o.data}catch(o){o.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):c({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}},E=async()=>{try{const{data:o}=await instanceAdmin({url:"/opt/mapel",method:"GET"});w.value=o.data}catch(o){o.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):c({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}},O=async()=>{try{const{data:o}=await instanceAdmin({url:"/opt/rombel",method:"GET"});F.value=o.data}catch(o){o.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):c({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}},V=async()=>{try{const{data:o}=await instanceAdmin({url:"/opt/guru",method:"GET"});j.value=o.data}catch(o){o.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):c({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}},$=()=>{if(s.id_soal=="")s.id_kelas="",s.id_mapel="",s.id_guru="",s.id_rombel="";else{const o=p.value.find(e=>e.id==s.id_soal);s.id_kelas=o.id_kelas,s.id_mapel=o.id_mapel,s.id_guru=o.id_guru,s.id_rombel=o.id_rombel}},K=async()=>{v.value=!0;try{const{data:o}=await instanceAdmin({url:"/admin/ujian",method:"POST",data:s});c({text:"Berhasil tambah ujian",type:"success",duration:2e3}),y.push({name:"ujian"})}catch(o){if(o.response.status==401)localStorage.removeItem("TOKEN"),location.reload();else if(o.response.status==422){const e=o.response.data.errors;a.id_soal=e.id_soal?e.id_soal[0]:null,a.id_kelas=e.id_kelas?e.id_kelas[0]:null,a.id_jenis_ujian=e.id_jenis_ujian?e.id_jenis_ujian[0]:null,a.id_materi=e.id_materi?e.id_materi[0]:null,a.id_guru=e.id_guru?e.id_guru[0]:null,a.id_rombel=e.id_rombel?e.id_rombel[0]:null,a.nama=e.nama?e.nama[0]:null,a.lama_ujian=e.lama_ujian?e.lama_ujian[0]:null,a.waktu_mulai=e.waktu_mulai?e.waktu_mulai[0]:null,a.w_akhir=e.w_akhir?e.w_akhir[0]:null,a.is_hasil=e.is_hasil?e.is_hasil[0]:null,a.is_acak=e.is_acak?e.is_acak[0]:null}else c({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}finally{v.value=!1}};return N(()=>{T(),U(),V(),E(),O()}),(o,e)=>(i(),r("div",B,[t("div",C,[D,t("div",L,[t("div",R,[t("div",z,[H,n(t("textarea",{id:"nama","onUpdate:modelValue":e[0]||(e[0]=l=>s.nama=l),rows:"1",class:u(["block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border focus:ring-blue-500 focus:border-blue-500",a.nama?"border-red-400":"border-gray-300"]),placeholder:"UH Matematika SMT 1 ...",onFocus:e[1]||(e[1]=l=>a.nama=null)},null,34),[[x,s.nama]]),a.nama?(i(),r("div",J,d(a.nama),1)):_("",!0)]),t("div",W,[Y,n(t("select",{id:"soal","onUpdate:modelValue":e[2]||(e[2]=l=>s.id_soal=l),onChange:e[3]||(e[3]=A(l=>$(),["prevent"])),class:u(["bg-gray-50 border text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",a.id_soal?"border-red-400":"border-gray-300"]),onFocus:e[4]||(e[4]=l=>a.id_soal=null)},[q,(i(!0),r(k,null,f(p.value,(l,m)=>(i(),r("option",{key:m,value:l.id},d(l.text),9,Q))),128))],34),[[g,s.id_soal]]),a.id_soal?(i(),r("div",X,d(a.id_soal),1)):_("",!0)])]),t("div",Z,[t("div",ee,[te,n(t("select",{id:"kelas","onUpdate:modelValue":e[5]||(e[5]=l=>s.id_kelas=l),class:u(["bg-gray-50 border text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",a.id_kelas?"border-red-400":"border-gray-300"]),onFocus:e[6]||(e[6]=l=>a.id_kelas=null)},[ae,(i(!0),r(k,null,f(h.value,(l,m)=>(i(),r("option",{key:m,value:l.id},d(l.text),9,le))),128))],34),[[g,s.id_kelas]]),a.id_kelas?(i(),r("div",se,d(a.id_kelas),1)):_("",!0)]),t("div",oe,[ie,n(t("select",{id:"mapel","onUpdate:modelValue":e[7]||(e[7]=l=>s.id_mapel=l),class:u(["bg-gray-50 border text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",a.id_mapel?"border-red-400":"border-gray-300"]),onFocus:e[8]||(e[8]=l=>a.id_mapel=null)},[re,(i(!0),r(k,null,f(w.value,(l,m)=>(i(),r("option",{key:m,value:l.id},d(l.text),9,de))),128))],34),[[g,s.id_mapel]]),a.id_mapel?(i(),r("div",ne,d(a.id_mapel),1)):_("",!0)]),t("div",ue,[_e,n(t("select",{id:"guru","onUpdate:modelValue":e[9]||(e[9]=l=>s.id_guru=l),class:u(["bg-gray-50 border text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",a.id_guru?"border-red-400":"border-gray-300"]),onFocus:e[10]||(e[10]=l=>a.id_guru=null)},[ce,(i(!0),r(k,null,f(j.value,(l,m)=>(i(),r("option",{key:m,value:l.id},d(l.text),9,me))),128))],34),[[g,s.id_guru]]),a.id_guru?(i(),r("div",be,d(a.id_guru),1)):_("",!0)])]),t("div",ge,[t("div",xe,[ke,t("div",fe,[n(t("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>s.lama_ujian=l),type:"number",id:"lama_ujian",class:u(["bg-gray-50 border text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 mr-2",a.lama_ujian?"border-red-400":"border-gray-300"]),onFocus:e[12]||(e[12]=l=>a.lama_ujian=null)},null,34),[[x,s.lama_ujian]]),pe]),a.lama_ujian?(i(),r("div",ve,d(a.lama_ujian),1)):_("",!0)]),t("div",ye,[he,t("div",we,[n(t("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>s.waktu_mulai=l),type:"datetime-local",id:"waktu_mulai",class:u(["bg-gray-50 border text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 mr-2",a.waktu_mulai?"border-red-400":"border-gray-300"]),onFocus:e[14]||(e[14]=l=>a.waktu_mulai=null)},null,34),[[x,s.waktu_mulai]])]),a.waktu_mulai?(i(),r("div",je,d(a.waktu_mulai),1)):_("",!0)]),t("div",Se,[Me,t("div",Fe,[n(t("input",{"onUpdate:modelValue":e[15]||(e[15]=l=>s.w_akhir=l),type:"datetime-local",id:"w_akhir",class:u(["bg-gray-50 border text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 mr-2",a.w_akhir?"border-red-400":"border-gray-300"]),onFocus:e[16]||(e[16]=l=>a.w_akhir=null)},null,34),[[x,s.w_akhir]])]),a.w_akhir?(i(),r("div",Te,d(a.w_akhir),1)):_("",!0)])]),t("div",Ue,[t("div",Ee,[Oe,n(t("select",{id:"is_hasil","onUpdate:modelValue":e[17]||(e[17]=l=>s.is_hasil=l),class:u(["bg-gray-50 border text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",a.is_hasil?"border-red-400":"border-gray-300"]),onFocus:e[18]||(e[18]=l=>a.is_hasil=null)},Ke,34),[[g,s.is_hasil]]),a.is_hasil?(i(),r("div",Ge,d(a.is_hasil),1)):_("",!0)]),t("div",Ne,[Ae,n(t("select",{id:"is_acak","onUpdate:modelValue":e[19]||(e[19]=l=>s.is_acak=l),class:u(["bg-gray-50 border text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",a.is_acak?"border-red-400":"border-gray-300"]),onFocus:e[20]||(e[20]=l=>a.is_acak=null)},Be,34),[[g,s.is_acak]]),a.is_acak?(i(),r("div",Ce,d(a.is_acak),1)):_("",!0)])])]),t("div",De,[v.value?(i(),r("div",Le,[t("div",Re,[t("img",{src:M(P),alt:"",class:"w-8"},null,8,ze),He])])):(i(),r("div",Je,[t("button",{onClick:e[21]||(e[21]=l=>M(y).push({name:"soal"})),type:"button",class:"mr-5 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"}," Batal "),t("button",{onClick:K,type:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"}," Simpan ")]))])])]))}};export{Qe as default};
