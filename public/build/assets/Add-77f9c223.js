import{a as B,r as n,b as V,l as N,o as l,c as o,d as e,e as f,J as x,F as y,s as v,v as T,x as _,t as c,y as k,m as S,i as w,k as R}from"./app-a49cccd1.js";import{l as Z}from"./loader-50bc1437.js";const D={class:"w-full box-border p-5"},K={class:"w-full relative overflow-x-auto shadow-md sm:rounded-lg bg-white"},X=e("div",{class:"box-border px-6 py-6 border-b bg-white flex justify-between items-center"},[e("h2",{class:"text-lg font-bold"},"Tambah Materi")],-1),J={class:"w-full p-6 box-border"},H={class:"w-full flex items-center flex-col lg:flex-row lg:space-x-3"},$={class:"mb-6 w-1/3"},q=e("label",{for:"mapel",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Mata Pelajaran",-1),Q=e("option",{value:""},"Pilih Mapel",-1),W=["value"],Y={class:"mb-6 w-1/3"},ee=e("label",{for:"kelas",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Kelas",-1),te=e("option",{value:""},"Pilih Kelas",-1),ae=["value"],se={class:"mb-6 w-1/3"},re=e("label",{for:"guru",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Guru Pengampu",-1),le=e("option",{value:""},"Pilih Guru",-1),oe=["value"],ie={class:"mb-6 w-full"},de=e("label",{for:"judul",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Judul / Nama Materi",-1),ne={class:"mb-6 w-full"},ce=e("label",{for:"deskripsi",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Deskripsi Materi",-1),ue={class:"w-full flex flex-col lg:flex-row lg:space-x-3"},me={class:"mb-6 w-1/3"},ge=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Media Image",-1),pe={class:"flex items-center justify-center w-full"},fe={key:0},be=["src"],_e={key:1,class:"flex flex-col items-center justify-center pt-5 pb-6"},he=w('<svg class="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path></svg><p class="mb-2 text-sm text-gray-500 dark:text-gray-400"><span class="font-semibold">Click to upload</span></p><p class="text-xs text-gray-500 dark:text-gray-400">SVG, PNG, JPG or GIF (MAX. 2 mb)</p>',3),xe=[he],ye={key:0,class:"text-red-500 italic text-xs mt-1"},ve={class:"mb-6 w-1/3"},ke=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Media File",-1),we={class:"flex items-center justify-center w-full"},je={xmlns:"http://www.w3.org/2000/svg",id:"file","data-name":"Layer 1",viewBox:"0 0 24 24",class:"w-40 fill-current"},Me={key:0,d:"M7.98,16.11c0,.47-.41,.86-.89,.86h-.83s0-1.72,0-1.72h.84c.48,0,.89,.39,.89,.86Zm7.02-8.11h6.54c-.35-.91-.88-1.75-1.59-2.46l-3.48-3.49c-.71-.71-1.55-1.24-2.46-1.59V7c0,.55,.45,1,1,1Zm-2.91,7.25h-.84v3.5s.84,0,.84,0c.48,0,.89-.39,.89-.86v-1.78c0-.47-.41-.86-.89-.86Zm9.91-4.76v8.51c0,2.76-2.24,5-5,5H7c-2.76,0-5-2.24-5-5V5C2,2.24,4.24,0,7,0h4.51c.16,0,.32,.01,.49,.02V7c0,1.65,1.35,3,3,3h6.98c.01,.16,.02,.32,.02,.49Zm-12.77,5.62c0-1.16-.96-2.11-2.14-2.11h-1.09c-.55,0-1,.45-1,1v4.44c0,.35,.28,.62,.62,.62s.62-.28,.62-.62v-1.22h.84c1.18,0,2.14-.95,2.14-2.11Zm5,0c0-1.16-.96-2.11-2.14-2.11h-1.09c-.55,0-1,.45-1,1v4.44c0,.35,.28,.56,.62,.56s1.46,0,1.46,0c1.18,0,2.14-.95,2.14-2.11v-1.78Zm4.79-1.48c0-.35-.28-.62-.62-.62h-2.31c-.35,0-.62,.28-.62,.62v4.81c0,.35,.28,.62,.62,.62s.62-.28,.62-.62v-1.8h1.24c.35,0,.62-.28,.62-.62s-.28-.62-.62-.62h-1.24v-1.14h1.69c.35,0,.62-.28,.62-.62Z"},Ce={key:1,d:"M21.98,10h-6.98c-1.65,0-3-1.35-3-3V.02c-.16-.01-.32-.02-.49-.02H7C4.24,0,2,2.24,2,5v14c0,2.76,2.24,5,5,5h10c2.76,0,5-2.24,5-5V10.49c0-.16-.01-.32-.02-.49Zm-5.26,4.24l-1.42,5.66c-.15,.61-.68,1.05-1.31,1.09-.63,.04-1.21-.32-1.44-.91l-.55-1.38-.55,1.38c-.22,.56-.75,.91-1.34,.91-.03,0-.07,0-.1,0-.63-.04-1.15-.48-1.31-1.1l-1.41-5.66c-.13-.54,.19-1.08,.73-1.21,.53-.13,1.08,.19,1.21,.73l1,4,.85-2.13c.15-.38,.52-.63,.93-.63h0c.41,0,.78,.25,.93,.63l.84,2.13,1.01-4c.13-.54,.68-.86,1.21-.73,.54,.13,.86,.68,.73,1.21Zm-2.72-7.24V.46c.91,.35,1.75,.88,2.46,1.59l3.48,3.49c.71,.71,1.24,1.55,1.59,2.46h-6.54c-.55,0-1-.45-1-1Z"},Fe={class:"mt-2 text-gray-500 font-semibold text-center"},Ve={key:1,class:"flex flex-col items-center justify-center pt-5 pb-6"},Te=w('<svg class="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path></svg><p class="mb-2 text-sm text-gray-500 dark:text-gray-400"><span class="font-semibold">Click to upload</span></p><p class="text-xs text-gray-500 dark:text-gray-400">PDF or DOC (MAX. 5mb)</p>',3),Se=[Te],Le={key:0,class:"text-red-500 italic text-xs mt-1"},ze={class:"mb-6 w-1/3"},Ae=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Media Video",-1),Oe={class:"flex items-center justify-center w-full"},Ge={key:0,class:"flex flex-col items-center justify-center pt-5 pb-6 text-red-500"},Pe=e("svg",{xmlns:"http://www.w3.org/2000/svg",id:"file","data-name":"Layer 1",viewBox:"0 0 24 24",class:"w-40 fill-current"},[e("g",{id:"XMLID_184_"},[e("path",{d:"M23.498,6.186c-0.276-1.039-1.089-1.858-2.122-2.136C19.505,3.546,12,3.546,12,3.546s-7.505,0-9.377,0.504   C1.591,4.328,0.778,5.146,0.502,6.186C0,8.07,0,12,0,12s0,3.93,0.502,5.814c0.276,1.039,1.089,1.858,2.122,2.136   C4.495,20.454,12,20.454,12,20.454s7.505,0,9.377-0.504c1.032-0.278,1.845-1.096,2.122-2.136C24,15.93,24,12,24,12   S24,8.07,23.498,6.186z M9.546,15.569V8.431L15.818,12L9.546,15.569z"})])],-1),Ie={class:"mt-2 text-gray-500 font-semibold text-center"},Ee={key:1,class:"flex flex-col items-center justify-center pt-5 pb-6"},Ue=w('<svg class="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path></svg><p class="mb-2 text-sm text-gray-500 dark:text-gray-400"><span class="font-semibold">Click to upload</span></p><p class="text-xs text-gray-500 dark:text-gray-400">MP4, MPEG or AVI (MAX. 30 mb)</p>',3),Be=[Ue],Ne={key:0,class:"text-red-500 italic text-xs mt-1"},Re={class:"border-t px-6 py-4 box-order"},Ze={key:0,class:"flex items-center justify-end"},De={class:"flex items-center"},Ke=["src"],Xe=e("div",{class:"text-gray-600 italic"},"Menyimpan Data",-1),Je={key:1,class:"flex justify-end"},Qe={__name:"Add",setup(He){const j=B(),{notify:u}=R(),M=n([]),C=n([]),L=n([]),F=n([]),b=n(),m=n(),g=n(),z=async()=>{try{const{data:t}=await instanceAdmin({url:"/opt/kelas",method:"GET"});M.value=t.data}catch(t){t.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):u({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}},A=async()=>{try{const{data:t}=await instanceAdmin({url:"/opt/mapel",method:"GET"});C.value=t.data}catch(t){t.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):u({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}},O=async()=>{try{const{data:t}=await instanceAdmin({url:"/opt/rombel",method:"GET"});L.value=t.data}catch(t){t.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):u({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}},G=async()=>{try{const{data:t}=await instanceAdmin({url:"/opt/guru",method:"GET"});F.value=t.data}catch(t){t.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):u({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}},h=n(!1),s=V({id:null,id_kelas:"",id_mapel:"",id_rombel:"",id_guru:"",judul:"",slug:"",deskripsi:"",media_image:"",media_file:"",media_video:""}),r=V({id_kelas:null,id_rombel:null,id_mapel:null,id_guru:null,judul:null,slug:null,deskripsi:null,media_image:null,media_file:null,media_video:null}),P=()=>{r.media_image=null;const t=b.value.files[0],i=t.size,a=t.type,d=["image/jpg","image/jpeg","image/svg+xml","image/gif","image/png"],p=2*1048576;if(!d.includes(a)){r.media_image="Type File must be jpg, jpeg, png, svg or gif";return}if(i>p){r.media_image="file size cannot be larger than 2 mb";return}s.media_image=URL.createObjectURL(t)},I=()=>{r.media_file=null;const t=m.value.files[0],i=t.size,a=t.type,d=["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],p=5*1048576;if(!d.includes(a)){r.media_file="Type File must be pdf or docx";return}if(i>p){r.media_file="file size cannot be larger than 5 mb";return}s.media_file=URL.createObjectURL(t)},E=()=>{r.media_video=null;const t=g.value.files[0],i=t.size,a=t.type,d=["video/mp4","video/mpeg","video/x-msvideo"],p=30*1048576;if(!d.includes(a)){r.media_video="Type Video must be mp4, mpeg or avi";return}if(i>p){r.media_video="file size cannot be larger than 30 mb";return}s.media_video=URL.createObjectURL(g.value.files[0])},U=async()=>{if(r.media_file||r.media_image||r.media_video){u({text:"Anda memiliki input yang tidak sesuai, silahkan cek kembali input anda",type:"error",duration:2e3});return}h.value=!0;try{let t=new FormData;t.append("id_kelas",s.id_kelas??""),t.append("id_mapel",s.id_mapel??""),t.append("id_rombel",s.id_rombel??""),t.append("id_guru",s.id_guru??""),t.append("judul",s.judul??""),t.append("slug",s.slug??""),t.append("deskripsi",s.deskripsi??""),b.value.files[0]!==void 0&&t.append("media_image",b.value.files[0]),m.value.files[0]!==void 0&&t.append("media_file",m.value.files[0]),g.value.files[0]!==void 0&&t.append("media_video",g.value.files[0]);const{data:i}=await instanceAdmin({url:"/admin/materi",method:"POST",headers:{"Content-Type":"multipart/form-data"},data:t});u({text:"Berhasil tambah materi",type:"success",duration:2e3}),j.push({name:"materi"})}catch(t){t.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):t.response.status==422?t.response.data.errors:u({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}finally{h.value=!1}};return N(()=>{z(),G(),A(),O()}),(t,i)=>(l(),o("div",D,[e("div",K,[X,e("div",J,[e("div",H,[e("div",$,[q,f(e("select",{id:"mapel","onUpdate:modelValue":i[0]||(i[0]=a=>s.id_mapel=a),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[Q,(l(!0),o(y,null,v(C.value,(a,d)=>(l(),o("option",{key:d,value:a.id},c(a.text),9,W))),128))],512),[[x,s.id_mapel]])]),e("div",Y,[ee,f(e("select",{id:"kelas","onUpdate:modelValue":i[1]||(i[1]=a=>s.id_kelas=a),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[te,(l(!0),o(y,null,v(M.value,(a,d)=>(l(),o("option",{key:d,value:a.id},c(a.text),9,ae))),128))],512),[[x,s.id_kelas]])]),e("div",se,[re,f(e("select",{id:"guru","onUpdate:modelValue":i[2]||(i[2]=a=>s.id_guru=a),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[le,(l(!0),o(y,null,v(F.value,(a,d)=>(l(),o("option",{key:d,value:a.id},c(a.text),9,oe))),128))],512),[[x,s.id_guru]])])]),e("div",ie,[de,f(e("textarea",{id:"judul","onUpdate:modelValue":i[3]||(i[3]=a=>s.judul=a),rows:"2",class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Theorema Phytagoras ..."},null,512),[[T,s.judul]])]),e("div",ne,[ce,f(e("textarea",{id:"deskripsi","onUpdate:modelValue":i[4]||(i[4]=a=>s.deskripsi=a),rows:"5",class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"sebuah Rumus untuk menghitung sisi terpanjang segitiga ......"},null,512),[[T,s.deskripsi]])]),e("div",ue,[e("div",me,[ge,e("div",pe,[e("label",{for:"media-image",class:_(["flex flex-col items-center justify-center w-full h-64 border-2 border-dashed rounded-lg cursor-pointer bg-gray-50",r.media_image?"border-red-300":"border-gray-300"])},[s.media_image?(l(),o("div",fe,[e("img",{src:s.media_image,alt:"",loading:"lazy",class:"w-full object-cover object-center"},null,8,be)])):(l(),o("div",_e,xe)),e("input",{id:"media-image",ref_key:"mediaImage",ref:b,type:"file",class:"sr-only",onChange:P},null,544)],2)]),r.media_image?(l(),o("div",ye,c(r.media_image),1)):k("",!0)]),e("div",ve,[ke,e("div",we,[e("label",{for:"media-file",class:_(["flex flex-col items-center justify-center w-full h-64 border-2 border-dashed rounded-lg cursor-pointer bg-gray-50",r.media_file?"border-red-300":"border-gray-300"])},[s.media_file?(l(),o("div",{key:0,class:_(["flex flex-col items-center justify-center pt-5 pb-6",m.value.files[0].type=="application/pdf"?"text-red-500":"text-blue-500"])},[(l(),o("svg",je,[m.value.files[0].type=="application/pdf"?(l(),o("path",Me)):(l(),o("path",Ce))])),e("div",Fe,c(m.value.files[0].name),1)],2)):(l(),o("div",Ve,Se)),e("input",{id:"media-file",ref_key:"mediaFile",ref:m,type:"file",class:"sr-only",onChange:I},null,544)],2)]),r.media_file?(l(),o("div",Le,c(r.media_file),1)):k("",!0)]),e("div",ze,[Ae,e("div",Oe,[e("label",{for:"media-video",class:_(["flex flex-col items-center justify-center w-full h-64 border-2 border-dashed rounded-lg cursor-pointer bg-gray-50",r.media_video?"border-red-300":"border-gray-300"])},[s.media_video?(l(),o("div",Ge,[Pe,e("div",Ie,c(g.value.files[0].name),1)])):(l(),o("div",Ee,Be)),e("input",{id:"media-video",ref_key:"mediaVideo",ref:g,type:"file",class:"sr-only",onChange:E},null,544)],2)]),r.media_video?(l(),o("div",Ne,c(r.media_video),1)):k("",!0)])])]),e("div",Re,[h.value?(l(),o("div",Ze,[e("div",De,[e("img",{src:S(Z),alt:"",class:"w-8"},null,8,Ke),Xe])])):(l(),o("div",Je,[e("button",{onClick:i[5]||(i[5]=a=>S(j).push({name:"materi"})),type:"button",class:"mr-5 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"}," Batal "),e("button",{onClick:U,type:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"}," Simpan ")]))])])]))}};export{Qe as default};
