import{a as D,A as N,r as c,b as T,l as K,o as l,c as o,d as e,e as b,J as h,F as y,s as v,v as S,x as k,t as u,y as w,m as L,i as j,k as Z}from"./app-070cc789.js";import{l as X}from"./loader-50bc1437.js";const J={class:"w-full box-border p-5"},$={class:"w-full relative overflow-x-auto shadow-md sm:rounded-lg"},H=e("div",{class:"box-border px-6 py-6 border-b bg-white flex justify-between items-center"},[e("h2",{class:"text-lg font-bold"},"Edit Materi")],-1),q={class:"w-full p-6 box-border"},Q={class:"w-full flex items-center flex-col lg:flex-row lg:space-x-3"},W={class:"mb-6 w-1/3"},Y=e("label",{for:"kelas",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Kelas",-1),ee=e("option",{value:""},"Pilih Kelas",-1),te=["value"],ae={class:"mb-6 w-1/3"},se=e("label",{for:"mapel",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Mata Pelajaran",-1),re=e("option",{value:""},"Pilih Mapel",-1),ie=["value"],le={class:"mb-6 w-1/3"},oe=e("label",{for:"guru",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Guru Pengampu",-1),de=e("option",{value:""},"Pilih Guru",-1),ne=["value"],ce={class:"mb-6 w-full"},ue=e("label",{for:"judul",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Judul / Nama Materi",-1),me={class:"mb-6 w-full"},ge=e("label",{for:"deskripsi",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Deskripsi Materi",-1),pe={class:"w-full flex flex-col lg:flex-row lg:space-x-3"},fe={class:"mb-6 w-1/3"},be=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Media Image",-1),_e={class:"flex items-center justify-center w-full"},xe={key:0},he=["src"],ye={key:1,class:"flex flex-col items-center justify-center pt-5 pb-6"},ve=j('<svg class="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path></svg><p class="mb-2 text-sm text-gray-500 dark:text-gray-400"><span class="font-semibold">Click to upload</span></p><p class="text-xs text-gray-500 dark:text-gray-400">SVG, PNG, JPG or GIF (MAX. 2 mb)</p>',3),ke=[ve],we={key:0,class:"text-red-500 italic text-xs mt-1"},je={class:"mb-6 w-1/3"},Me=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Media File",-1),Fe={class:"flex items-center justify-center w-full"},Ce={key:0,class:"flex flex-col items-center justify-center pt-5 pb-6 text-red-500"},Ve=e("svg",{xmlns:"http://www.w3.org/2000/svg",id:"file","data-name":"Layer 1",viewBox:"0 0 24 24",class:"w-40 fill-current"},[e("path",{d:"M7.98,16.11c0,.47-.41,.86-.89,.86h-.83s0-1.72,0-1.72h.84c.48,0,.89,.39,.89,.86Zm7.02-8.11h6.54c-.35-.91-.88-1.75-1.59-2.46l-3.48-3.49c-.71-.71-1.55-1.24-2.46-1.59V7c0,.55,.45,1,1,1Zm-2.91,7.25h-.84v3.5s.84,0,.84,0c.48,0,.89-.39,.89-.86v-1.78c0-.47-.41-.86-.89-.86Zm9.91-4.76v8.51c0,2.76-2.24,5-5,5H7c-2.76,0-5-2.24-5-5V5C2,2.24,4.24,0,7,0h4.51c.16,0,.32,.01,.49,.02V7c0,1.65,1.35,3,3,3h6.98c.01,.16,.02,.32,.02,.49Zm-12.77,5.62c0-1.16-.96-2.11-2.14-2.11h-1.09c-.55,0-1,.45-1,1v4.44c0,.35,.28,.62,.62,.62s.62-.28,.62-.62v-1.22h.84c1.18,0,2.14-.95,2.14-2.11Zm5,0c0-1.16-.96-2.11-2.14-2.11h-1.09c-.55,0-1,.45-1,1v4.44c0,.35,.28,.56,.62,.56s1.46,0,1.46,0c1.18,0,2.14-.95,2.14-2.11v-1.78Zm4.79-1.48c0-.35-.28-.62-.62-.62h-2.31c-.35,0-.62,.28-.62,.62v4.81c0,.35,.28,.62,.62,.62s.62-.28,.62-.62v-1.8h1.24c.35,0,.62-.28,.62-.62s-.28-.62-.62-.62h-1.24v-1.14h1.69c.35,0,.62-.28,.62-.62Z"})],-1),Te={class:"mt-2 text-gray-500 font-semibold text-center"},Se={key:1,class:"flex flex-col items-center justify-center pt-5 pb-6"},Le=j('<svg class="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path></svg><p class="mb-2 text-sm text-gray-500 dark:text-gray-400"><span class="font-semibold">Click to upload</span></p><p class="text-xs text-gray-500 dark:text-gray-400">PDF or DOC (MAX. 5mb)</p>',3),Ae=[Le],ze={key:0,class:"text-red-500 italic text-xs mt-1"},Ee={class:"mb-6 w-1/3"},Ge=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Media Video",-1),Oe={class:"flex items-center justify-center w-full"},Pe={key:0,class:"flex flex-col items-center justify-center pt-5 pb-6 text-red-500"},Ie=e("svg",{xmlns:"http://www.w3.org/2000/svg",id:"file","data-name":"Layer 1",viewBox:"0 0 24 24",class:"w-40 fill-current"},[e("g",{id:"XMLID_184_"},[e("path",{d:"M23.498,6.186c-0.276-1.039-1.089-1.858-2.122-2.136C19.505,3.546,12,3.546,12,3.546s-7.505,0-9.377,0.504   C1.591,4.328,0.778,5.146,0.502,6.186C0,8.07,0,12,0,12s0,3.93,0.502,5.814c0.276,1.039,1.089,1.858,2.122,2.136   C4.495,20.454,12,20.454,12,20.454s7.505,0,9.377-0.504c1.032-0.278,1.845-1.096,2.122-2.136C24,15.93,24,12,24,12   S24,8.07,23.498,6.186z M9.546,15.569V8.431L15.818,12L9.546,15.569z"})])],-1),Re={class:"mt-2 text-gray-500 font-semibold text-center"},Ue={key:1,class:"flex flex-col items-center justify-center pt-5 pb-6"},Be=j('<svg class="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path></svg><p class="mb-2 text-sm text-gray-500 dark:text-gray-400"><span class="font-semibold">Click to upload</span></p><p class="text-xs text-gray-500 dark:text-gray-400">MP4, MPEG or AVI (MAX. 30 mb)</p>',3),De=[Be],Ne={key:0,class:"text-red-500 italic text-xs mt-1"},Ke={class:"border-t px-6 py-4 box-order"},Ze={key:0,class:"flex items-center justify-end"},Xe={class:"flex items-center"},Je=["src"],$e=e("div",{class:"text-gray-600 italic"},"Menyimpan Data",-1),He={key:1,class:"flex justify-end"},Ye={__name:"Edit",setup(qe){const{notify:m}=Z(),M=D(),x=N(),F=c([]),C=c([]),A=c([]),V=c([]),_=c(),p=c(),g=c(),f=c(!1),a=T({id:null,id_kelas:"",id_rombel:"",id_guru:"",judul:"",slug:"",deskripsi:"",media_image:"",media_file:"",media_video:""}),i=T({id_kelas:null,id_rombel:null,id_guru:null,judul:null,slug:null,deskripsi:null,media_image:null,media_file:null,media_video:null}),z=async()=>{try{const{data:t}=await instanceAdmin({url:"/opt/kelas",method:"GET"});F.value=t.data}catch(t){t.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):m({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}},E=async()=>{try{const{data:t}=await instanceAdmin({url:"/opt/mapel",method:"GET"});C.value=t.data}catch(t){t.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):m({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}},G=async()=>{try{const{data:t}=await instanceAdmin({url:"/opt/rombel",method:"GET"});A.value=t.data}catch(t){t.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):m({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}},O=async()=>{try{const{data:t}=await instanceAdmin({url:"/opt/guru",method:"GET"});V.value=t.data}catch(t){t.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):m({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}},P=async()=>{f.value=!0;try{const{data:t}=await instanceAdmin({url:`/admin/materi/${x.params.id}/detail`,method:"GET"}),s=t.data;a.id=s.id,a.id_kelas=s.id_kelas,a.id_mapel=s.id_mapel,a.id_rombel=s.id_rombel,a.id_guru=s.id_guru,a.judul=s.judul,a.kelas=s.kelas,a.mapel=s.mapel,a.guru=s.guru,a.deskripsi=s.deskripsi,a.rombel=s.rombel,a.media_file=s.media_file,a.media_image=s.media_image,a.media_video=s.media_video,a.slug=s.slug}catch(t){console.log(t)}finally{f.value=!1}},I=()=>{i.media_image=null;const t=_.value.files[0],s=t.size,n=t.type,r=["image/jpg","image/jpeg","image/svg+xml","image/gif","image/png"],d=2*1048576;if(!r.includes(n)){i.media_image="Type File must be jpg, jpeg, png, svg or gif";return}if(s>d){i.media_image="file size cannot be larger than 2 mb";return}a.media_image=URL.createObjectURL(t)},R=()=>{i.media_file=null;const t=p.value.files[0],s=t.size,n=t.type,r=["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],d=5*1048576;if(!r.includes(n)){i.media_file="Type File must be pdf or docx";return}if(s>d){i.media_file="file size cannot be larger than 5 mb";return}a.media_file=URL.createObjectURL(t)},U=()=>{i.media_video=null;const t=g.value.files[0],s=t.size,n=t.type,r=["video/mp4","video/mpeg","video/x-msvideo"],d=30*1048576;if(!r.includes(n)){i.media_video="Type Video must be mp4, mpeg or avi";return}if(s>d){i.media_video="file size cannot be larger than 30 mb";return}a.media_video=URL.createObjectURL(g.value.files[0])},B=async()=>{if(i.media_file||i.media_image||i.media_video){m({text:"Anda memiliki input yang tidak sesuai, silahkan cek kembali input anda",type:"error",duration:2e3});return}f.value=!0;try{let t=new FormData;t.append("id_kelas",a.id_kelas??""),t.append("id_mapel",a.id_mapel??""),t.append("id_rombel",a.id_rombel??""),t.append("id_guru",a.id_guru??""),t.append("judul",a.judul??""),t.append("slug",a.slug??""),t.append("deskripsi",a.deskripsi??""),_.value.files[0]!==void 0&&t.append("media_image",_.value.files[0]),p.value.files[0]!==void 0&&t.append("media_file",p.value.files[0]),g.value.files[0]!==void 0&&t.append("media_video",g.value.files[0]);const{data:s}=await instanceAdmin({url:`/admin/materi/${x.params.id}/update`,method:"POST",headers:{"Content-Type":"multipart/form-data"},data:t});m({text:"Berhasil ubah materi",type:"success",duration:2e3}),M.push({name:"showMateri",params:{id:x.params.id}})}catch(t){console.log(t),t.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):t.response.status==422?t.response.data.errors:m({text:"Faliled to add, Server is Maintenent",type:"error",duration:2e3})}finally{f.value=!1}};return K(()=>{P(),z(),O(),E(),G()}),(t,s)=>{var n;return l(),o("div",J,[e("div",$,[H,e("div",q,[e("div",Q,[e("div",W,[Y,b(e("select",{id:"kelas","onUpdate:modelValue":s[0]||(s[0]=r=>a.id_kelas=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[ee,(l(!0),o(y,null,v(F.value,(r,d)=>(l(),o("option",{key:d,value:r.id},u(r.text),9,te))),128))],512),[[h,a.id_kelas]])]),e("div",ae,[se,b(e("select",{id:"mapel","onUpdate:modelValue":s[1]||(s[1]=r=>a.id_mapel=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[re,(l(!0),o(y,null,v(C.value,(r,d)=>(l(),o("option",{key:d,value:r.id},u(r.text),9,ie))),128))],512),[[h,a.id_mapel]])]),e("div",le,[oe,b(e("select",{id:"guru","onUpdate:modelValue":s[2]||(s[2]=r=>a.id_guru=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[de,(l(!0),o(y,null,v(V.value,(r,d)=>(l(),o("option",{key:d,value:r.id},u(r.text),9,ne))),128))],512),[[h,a.id_guru]])])]),e("div",ce,[ue,b(e("textarea",{id:"judul","onUpdate:modelValue":s[3]||(s[3]=r=>a.judul=r),rows:"2",class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Theorema Phytagoras ..."},null,512),[[S,a.judul]])]),e("div",me,[ge,b(e("textarea",{id:"deskripsi","onUpdate:modelValue":s[4]||(s[4]=r=>a.deskripsi=r),rows:"5",class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"sebuah Rumus untuk menghitung sisi terpanjang segitiga ......"},null,512),[[S,a.deskripsi]])]),e("div",pe,[e("div",fe,[be,e("div",_e,[e("label",{for:"media-image",class:k(["flex flex-col items-center justify-center w-full h-64 border-2 border-dashed rounded-lg cursor-pointer bg-gray-50",i.media_image?"border-red-300":"border-gray-300"])},[a.media_image?(l(),o("div",xe,[e("img",{src:a.media_image,alt:"",loading:"lazy",class:"w-full object-cover object-center"},null,8,he)])):(l(),o("div",ye,ke)),e("input",{id:"media-image",ref_key:"mediaImage",ref:_,type:"file",class:"sr-only",onChange:I},null,544)],2)]),i.media_image?(l(),o("div",we,u(i.media_image),1)):w("",!0)]),e("div",je,[Me,e("div",Fe,[e("label",{for:"media-file",class:k(["flex flex-col items-center justify-center w-full h-64 border-2 border-dashed rounded-lg cursor-pointer bg-gray-50",i.media_file?"border-red-300":"border-gray-300"])},[a.media_file?(l(),o("div",Ce,[Ve,e("div",Te,u(((n=p.value.files[0])==null?void 0:n.name)??"Materi"),1)])):(l(),o("div",Se,Ae)),e("input",{id:"media-file",ref_key:"mediaFile",ref:p,type:"file",class:"sr-only",onChange:R},null,544)],2)]),i.media_file?(l(),o("div",ze,u(i.media_file),1)):w("",!0)]),e("div",Ee,[Ge,e("div",Oe,[e("label",{for:"media-video",class:k(["flex flex-col items-center justify-center w-full h-64 border-2 border-dashed rounded-lg cursor-pointer bg-gray-50",i.media_video?"border-red-300":"border-gray-300"])},[a.media_video?(l(),o("div",Pe,[Ie,e("div",Re,u(g.value.files[0]?g.value.files[0].name:a.media_video),1)])):(l(),o("div",Ue,De)),e("input",{id:"media-video",ref_key:"mediaVideo",ref:g,type:"file",class:"sr-only",onChange:U},null,544)],2)]),i.media_video?(l(),o("div",Ne,u(i.media_video),1)):w("",!0)])])]),e("div",Ke,[f.value?(l(),o("div",Ze,[e("div",Xe,[e("img",{src:L(X),alt:"",class:"w-8"},null,8,Je),$e])])):(l(),o("div",He,[e("button",{onClick:s[5]||(s[5]=r=>L(M).push({name:"showMateri",params:{id:1}})),type:"button",class:"mr-5 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"}," Batal "),e("button",{onClick:B,type:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"}," Simpan ")]))])])])}}};export{Ye as default};
